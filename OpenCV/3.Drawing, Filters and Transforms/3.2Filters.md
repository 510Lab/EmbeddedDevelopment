## 图像滤镜
### 学习轨迹条
在学习图像滤镜算法之前，我们需要学习在OpenCV显示窗口上添加轨迹条来调整参数。  
下面上代码：
```c++
#include <iostream>
#include <opencv2/opencv.hpp>

using namespace std;
using namespace cv;

//分别对应窗口名称和轨迹条名称
string window="Image";
string trackbar="Radius";

Mat image=imread("../Test.png");

//圆心的位置、初始半径
Point center(image.cols/2,image.rows/2);
int radius=25;

//颜色
Scalar color=Scalar(0,255,0);

//规定线条
int thickness=2;LineTypes lineType=LINE_AA;int shift=0;

//回调函数，当轨迹条更改所绘制圆形的半径时，他将会被回调。
//此函数必须具有本例中使用的签名，签名的参数为int型和void指针类型
//这个函数非常简单，仅克隆原始图像，并在上面绘制一个圆形，然后显示出来。
void drawCircle(int,void*)
{
    Mat temp=image.clone();
    circle(temp,
                center,
                radius,
                color,
                thickness,
                lineType,
                shift);
    imshow(window,temp);
}

int main()
{
    namedWindow(window);

    //创建轨迹条，下面我们会就其中的参数进行解析。
    createTrackbar(trackbar,window,&radius,min(image.rows,image.cols)/2,drawCircle);

    //确保轨迹条可调整半径不小于25且不大于图像的宽度或长度值的一半。
    setTrackbarMin(trackbar,window,25);
    setTrackbarMax(trackbar,window,min(image.rows,image.cols)/2);

    //画出初始的圆。
    drawCircle(0,0);

    waitKey();

    return 0;
}
```
下面我们给出createTrackbar的函数原型：
```c++
int createTrackbar(const String& trackbarname, const String& winname,
                              int* value, int count,
                              TrackbarCallback onChange = 0,
                              void* userdata = 0);
```
第一个参数，代表轨迹条的名字，用来代表我们创建的轨迹条；  
第二个参数，代表窗口的名字，表示轨迹条会依附到哪个窗口上；  
第三个参数，一个指向整型的指针，表示滑块的位置。并在创建时，滑块的初始位置就是该变量当前的值；  
第四个参数，表示花块可以达到的最大位置的值。PS：滑块最小位置的值始终为0；  
第五个参数，TrackbarCallback类型的onChange，首先注意他有默认值为0。这是一个指向回调函数的指针，每次滑块位置改变时，这个函数都会进行回调。并且这个函数的原型必须为void XXXX(int,void*);其中第一个参数是轨迹条的位置，第二个参数是用户数据（看下面的第六个参数）。如果回调的是NULL指针，表示没有回调函数的调用，仅第三个参数value有变化；  
第六个参数，void*类型的userdata，他也有默认值0。这个函数是用户传给回调函数的数据，用来处理轨迹条事件。如果使用的第三个参数value实参是全局变量的话，完全可以不用去管这个参数。

---
你可以通过这个方法创建任意数量的轨迹条，但是你必须考虑到窗口大小的问题。

### 模糊/平滑滤镜